(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e,t,a){},48:function(e,t,a){e.exports=a(85)},53:function(e,t,a){},54:function(e,t,a){},63:function(e,t,a){},81:function(e,t,a){},85:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(24),l=a.n(o),s=(a(53),a(23)),i=a(22),c=(a(54),a(5)),u=a(6),m=a(8),h=a(7),d=a(26),p=a(9),g=a(2),f=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).toggleActive=function(e){a.forceUpdate()},a.state={collapse:!1},a.onClick=a.onClick.bind(Object(d.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"onClick",value:function(){this.setState({collapse:!this.state.collapse})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement(g.k,{style:{backgroundColor:"#212121"},dark:!0,expand:"md",scrolling:!0,fixed:"top"},r.a.createElement(g.l,{href:"/",onClick:this.toggleActive},r.a.createElement("strong",null,"Walk/Wait")),r.a.createElement(g.n,{onClick:this.onClick}),r.a.createElement(g.d,{isOpen:this.state.collapse,navbar:!0},r.a.createElement(g.m,{left:!0},r.a.createElement(g.i,{className:"/about"===window.location.pathname&&"active",onClick:this.toggleActive},r.a.createElement(g.j,{to:"/about"},"About")))))))}}]),t}(r.a.Component),b=function(){return r.a.createElement(g.f,{color:"elegant-color-dark",className:"font-small mt-4"},r.a.createElement("div",{className:"footer-copyright text-center py-3"},r.a.createElement(g.e,{fluid:!0},"\xa9 ",(new Date).getFullYear()," Copyright: Sharon Chien, Paul Xu, Quang Chieu Nguyen and Holland Gronau",r.a.createElement("br",null),r.a.createElement("a",{href:"/signin"},"Powered by:"),r.a.createElement("span",null," Google Maps Distance Matrix API & NextBus"))))},E=a(15),v=a.n(E),w=a(20),y=(a(63),function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("button",{style:{color:"#ffea00"},className:"btn search",type:"button",onClick:function(t){return e.props.geolocate(t)}},r.a.createElement(g.g,{far:!0,icon:"dot-circle"}))),r.a.createElement("select",{className:"custom-select",id:"",onChange:function(t){return e.props.handleChange(t)}},r.a.createElement("option",{defaultValue:!0},"Start..."),this.props.departOptions.map(function(e,t){return r.a.createElement("option",{key:"".concat(t,"_").concat(e.route,"_").concat(e.id),value:e.id,"data-route":e.route,"data-direction":e.direction},e.title)})))}}]),t}(n.Component)),k=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("select",{className:"custom-select",id:"",onChange:function(t){return e.props.handleChange(t)}},r.a.createElement("option",{defaultValue:!0},"Arrive..."),this.props.arrivalOptions.map(function(t,a){return r.a.createElement("option",{key:"".concat(a,"_").concat(e.props.route,"_").concat(t.id),value:t.id},t.title)})))}}]),t}(n.Component),x=a(12),C=a.n(x),N={getAllBuses:function(e,t){return C.a.get("/api/bus/latlon/".concat(e,"/").concat(t))},getNextStops:function(e,t,a){return C.a.get("/api/bus/nextstops/".concat(e,"/").concat(t,"/").concat(a))},search:function(e,t,a,n,r){return C.a.get("/api/app/search/".concat(e,"/").concat(t,"/").concat(a,"/").concat(n,"/").concat(r))}},O=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.travelMode,n=t.walkTime,o=t.nextBus;console.log("travelMode",a);var l="",s="";return"walk"===a?(l="walk",s="Based on our math, your feet are the best option."):"cab"===a?(l="cab",s="For various reasons, including that a bus may not be coming at all, you should call a cab. If you want to walk, it will take you ".concat(n," minutes.")):"wait"===a&&(l="wait",s="Our math shows the TTC will get you there faster. Next bus is arriving in ".concat(o," minute(s).")),console.log(l),console.log(s),r.a.createElement("div",null,r.a.createElement("button",{className:l,onClick:function(t){e.props.onClick(t)}},r.a.createElement("h2",null,l),r.a.createElement("br",null),r.a.createElement("p",null,s)))}}]),t}(r.a.Component),j=(a(29),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).geolocate=function(e){e.preventDefault();"geolocation"in navigator?navigator.geolocation.getCurrentPosition(a.geoSucess,a.geoError,{enableHighAccuracy:!0}):alert("Geolocation needs to be turned on for this application.")},a.geoSucess=function(e){a.setState({latitude:e.coords.latitude,longitude:e.coords.longitude});var t=a.state,n=t.latitude,r=t.longitude;a.getBusAtLocation(n,r)},a.geoError=function(e){console.log("GEOLOCATE ERROR(".concat(e.code,"): ").concat(e.message))},a.getBusAtLocation=function(e,t){N.getAllBuses(e,t).then(function(e){var t=e.data,n=[];t.forEach(function(e){var t={};t.route=e.route.id,t.id=e.stop.id;var a=e.values[0].direction.title.split("To: ")[1].split(" - ")[0].charAt(0),r=e.route.title.split("-")[1],o=e.stop.title.split(" ").slice(1).join(" ");t.title=e.route.id+a+" - "+r+" / "+o,t.direction=a,n.push(t)}),a.setState({departOptions:n})})},a.handleDepartInput=function(){var e=Object(w.a)(v.a.mark(function e(t){var n,r,o;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.selectedIndex,r=t.target.childNodes[n],o={route:r.getAttribute("data-route"),stopId:t.target.value,direction:r.getAttribute("data-direction")},e.next=6,a.setState({depart:o});case 6:a.listDestinations();case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.listDestinations=function(){var e=a.state.depart,t=e.route,n=e.direction,r=e.stopId;N.getNextStops(t,n,r).then(function(e){a.setState({arrivalOptions:e.data})})},a.handleDestinationInput=function(e){e.preventDefault();var t=e.target.selectedIndex,n=!1;t===e.target.childNodes.length-1&&(n=!0);var r=e.target.childNodes[t-1].getAttribute("value");1===t&&(r=a.state.depart.stopId);var o={stopId:e.target.value,terminal:n,previous:r};a.setState({arrival:o})},a.handleSubmit=function(e){e.preventDefault();var t=parseInt(a.state.depart.route),n=a.state.depart.stopId,r=a.state.arrival.stopId,o=a.state.arrival.terminal,l=a.state.arrival.previous;N.search(t,n,r,o,l).then(function(e){a.setState({receivedResult:!0,travelMode:e.data.travelMode,nextBus:e.data.bus.nextBus,walkTime:e.data.walk}),console.log(e.data)}).catch(function(e){a.setState({error:e})})},a.handleClickForDisplay=function(e){e.preventDefault(),a.setState({receivedResult:!1})},a.state={latitude:"",longitude:"",departOptions:[],arrivalOptions:[],depart:{},arrival:{},receivedResult:!1,travelMode:null,error:null,nextBus:null,walkTime:null},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return this.state.error?r.a.createElement(g.e,{className:"text-center mt-5 pt-5 mainContainer"},r.a.createElement(g.o,{className:"justify-content-center"},r.a.createElement(g.c,{md:"5",sm:"12"},r.a.createElement(g.b,{href:"/",color:"yellow accent-3",className:"black-text"},"TTC is unable provide bus info at this time.",r.a.createElement("br",null),"Click here to try again.")))):r.a.createElement(g.e,{className:"text-center mt-5 pt-5 mainContainer"},this.state.receivedResult?r.a.createElement(O,{className:"test",result:this.state.receivedResult,travelMode:this.state.travelMode,onClick:this.handleClickForDisplay,nextBus:this.state.nextBus,walkTime:this.state.walkTime}):r.a.createElement("form",{style:{maxWidth:"400px"},className:"mx-auto"},r.a.createElement(g.o,{className:"row justify-content-center"},r.a.createElement("p",{className:"white-text mb-3"},'Please press the "target icon" to find your current location. Then select your bus form the "Start..." dropdown menu.'),r.a.createElement(g.c,{sm:"12",className:"mb-4"},r.a.createElement(y,{departOptions:this.state.departOptions,geolocate:this.geolocate,latitude:this.state.latitude,longitude:this.state.longitude,handleChange:this.handleDepartInput})),r.a.createElement(g.c,{sm:"12",className:"mb-4"},r.a.createElement(k,{arrivalOptions:this.state.arrivalOptions,route:this.state.depart.route,handleChange:this.handleDestinationInput})),r.a.createElement(g.c,{className:"p-0 mx-auto"},r.a.createElement(g.b,{color:"yellow accent-3",className:"black-text",size:"lg",onClick:function(t){return e.handleSubmit(t)}},"Submit")))))}}]),t}(r.a.Component)),S=a(25),T={addAllRoutes:function(){return C.a.get("/admin/busDb/routes")}},A=(a(81),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).populateRoute=function(e){e.preventDefault(),T.addAllRoutes().then(function(e){console.log("All routes Added.")})},a.handleChange=function(e){return function(t){a.setState(Object(S.a)({},e,t.target.value))}},a.registerUser=function(){var e=Object(w.a)(v.a.mark(function e(t){var n,r,o,l;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=a.state,r=n.password,o=n.email,""!==r&&""!==o){e.next=6;break}a.setState({showError:!0,loginError:!1,registerError:!0}),e.next=19;break;case 6:return e.prev=6,e.next=9,C.a.post("/api/auth/signup",{email:o,password:r});case 9:l=e.sent,console.log(l.data),alert(l.data.message),a.setState({messageFromServer:l.data.message,showError:!1,loginError:!1,registerError:!1}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(6),console.log(e.t0),"username or email already taken"===e.t0.response.data&&(alert(e.t0.response.data),a.setState({showError:!0,loginError:!0,registerError:!1}));case 19:case"end":return e.stop()}},e,null,[[6,15]])}));return function(t){return e.apply(this,arguments)}}(),a.logout=function(){localStorage.removeItem("JWT"),a.setState({error:!0})},a.state={isLoading:!1,error:!0,email:"",password:"",loggedIn:!0,showError:!0,showNullError:!0,registerError:!0,messageFromServer:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("JWT");console.log(t),"undefined"===t?this.setState({isLoading:!1,error:!0}):C.a.get("/api/auth/user",{headers:{Authorization:"JWT ".concat(t)}}).then(function(t){console.log(t.data),t.data.auth&&(console.log("auth is ".concat(t.data.auth)),console.log(e),e.setState({isLoading:!1,error:!1}))}).catch(function(e){return console.error(e)})}},{key:"render",value:function(){var e=this,t=r.a.createElement("div",null,r.a.createElement(g.b,{color:"yellow accent-3",className:"black-text",onClick:function(t){return e.populateRoute(t)}}," Add TTC Routes and Stops "),r.a.createElement("hr",{style:{borderTop:"3px solid #ffffff"},className:"my-4"}),r.a.createElement(g.o,null,r.a.createElement(g.c,{md:"12",className:"mx-auto text-left"},r.a.createElement("form",null,r.a.createElement("p",{className:"h5 text-center white-text"},"Register New Admin"),r.a.createElement("div",{className:"white-text"},r.a.createElement(g.h,{className:"white-text",label:"Your Email",icon:"envelope",group:!0,type:"email",validate:!0,error:"wrong",success:"right",value:this.state.email,onChange:this.handleChange("email"),id:"emal"}),r.a.createElement(g.h,{className:"white-text",label:"Your password",icon:"lock",group:!0,type:"password",validate:!0,id:"password",value:this.state.password,onChange:this.handleChange("password")})),r.a.createElement("div",{className:"text-center"},r.a.createElement(g.b,{color:"yellow accent-3",className:"black-text",onClick:function(t){return e.registerUser(t)}},"Register"))))),r.a.createElement("hr",{style:{borderTop:"3px solid #ffffff"},className:"my-4"}),r.a.createElement(g.b,{color:"yellow accent-3",className:"black-text",onClick:function(t){return e.logout(t)}},"Log Out"));return r.a.createElement(g.e,{className:"text-center mt-5 pt-5 mainContainer"},r.a.createElement(g.o,{className:"justify-content-center"},r.a.createElement(g.c,{md:"5",sm:"12"},!this.state.error&&t,this.state.error&&r.a.createElement(g.b,{color:"yellow accent-3",className:"black-text",href:"/signin"}," Please login with the correct credentials.",r.a.createElement("br",null),"Click here to return to the Sign In page."))))}}]),t}(r.a.Component)),I=function(){return r.a.createElement(g.e,{id:"about",className:"mt-5 pt-5 mainContainer"},r.a.createElement("br",null),r.a.createElement("h2",null,"Why walk or wait?"),r.a.createElement("p",null,"We've all been there. Standing at a TTC stop, waiting, checking the time, waiting, checking the time, waiting .... checking the time. Then, the scramble. How far is it to my destiantion? When does the TTC say my chariot will arrive? Will it actually arrive at the next scheduled time? Or, will it be shorturned? And, even if it doess arrive, will it be full?"),r.a.createElement("p",null,"SHOULD I JUST START WALKING!?"),r.a.createElement("p",null,"This app takes the guesswork out of the equation. Real-time TTC data only tells when your bus or streetcar is SUPPOSED to arrive. Our app uses a proprietary algorithm to predict the future, figuring the statistical probability your ride will arrive as scheduled, you'll actually be able to get on it and it will take you all the way to your destanation FASTER (or slower) than you could make it on foot. No more street-corner math. No more should I stay or should I go. Kick back and let us make the tough decisions for you (after all, you decided what to wear this morning. Haven't you done enough?)"),r.a.createElement("p",null,'"Pure mathematics is, in its way, the poetry of logical ideas." \u2014 Albert Einstein'),r.a.createElement("br",null),r.a.createElement("h2",null,"About us"),r.a.createElement("p",null,"A group of four soon to graduate full stack developers from the University of Toronto. Walk or Wait is our final project and an app we have all become quite passionate about."),r.a.createElement("br",null),r.a.createElement("h2",null,"Sharon Chien"),r.a.createElement("p",null,"Financial consultant with a Master of Biotech turned web developer. Currently playing super mom by day and coder at night while on mat-leave. Powered by truck-loads of delicious food (carbo-loading for late night coding sessions) and a splash of caffeine. Always looking for a good coding challenge and to work with fun loving individuals on cool projects."),r.a.createElement("br",null),r.a.createElement("h2",null,"Paul Xu"),r.a.createElement("p",null,"Working as a Junior Softwarement Engineer/IT Consultant after graduting from University of Waterloo with a Bechlor of Mathematics/Computing Option in December 2018 and recently from the University of Toronto. Paul is passionate about coding when joined with data science. He is proud that Walk or Wait was able to inigrate both of his passions of web development and data modeling analysis. He is excited about his next journey of working towards a Master of Analytics in Georgia Tech starting at 2019."),r.a.createElement("br",null),r.a.createElement("h2",null,"Quang Chieu Nguyen"),r.a.createElement("p",null,"Currently working with the non-profit VWAT Family Services. Quang while passionate about helping others is seeking out new challeges in web developoment after gradution. Quang a father of two, three if you count his dog Flower believes mindfulness in the workplace is key to success, so he lives out through his interests in gardening, painting, and photography."),r.a.createElement("br",null),r.a.createElement("h2",null,"Holland Gronau"),r.a.createElement("p",null,"I believe in using apps and good old-fashioned math to makes people's lives easier and support good causes. From start to finish, Walk or Wait was developed with the philosphy that good technology should be used to solve real-life problems. "),r.a.createElement("br",null),r.a.createElement("br",null))},D=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(g.e,{className:"text-center mt-5 pt-5 mainContainer"},r.a.createElement(g.o,{className:"justify-content-center"},r.a.createElement(g.c,{md:"5",sm:"12"},r.a.createElement(g.b,{color:"yellow accent-3",className:"black-text",href:"/"},"Opps! Page not found.",r.a.createElement("br",null),"Click to return to main menu."))))}}]),t}(r.a.Component),W=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(m.a)(this,Object(h.a)(t).call(this))).handleChange=function(t){return function(a){e.setState(Object(S.a)({},t,a.target.value))}},e.loginUser=function(){var t=Object(w.a)(v.a.mark(function t(a){var n,r,o,l;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=e.state,r=n.email,o=n.password,""!==r&&""!==o){t.next=6;break}e.setState({showError:!1,showNullError:!0,loggedIn:!1}),t.next=19;break;case 6:return t.prev=6,t.next=9,C.a.post("/api/auth/signin",{email:r,password:o});case 9:l=t.sent,console.log(l.data),localStorage.setItem("JWT",l.data.token),e.setState({loggedIn:!0,showError:!1,showNullError:!1}),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(6),console.error(t.t0.response.data),"bad username"!==t.t0.response.data&&"passwords do not match"!==t.t0.response.data||e.setState({showError:!0,showNullError:!1});case 19:case"end":return t.stop()}},t,null,[[6,15]])}));return function(e){return t.apply(this,arguments)}}(),e.state={email:"",password:"",loggedIn:!1,showError:!1,showNullError:!1},e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return this.state.loggedIn?r.a.createElement(i.a,{to:"/admin"}):r.a.createElement(g.e,{className:"mt-5 pt-5 mainContainer white-text"},r.a.createElement(g.o,null,r.a.createElement(g.c,{md:"6",className:"mx-auto"},r.a.createElement("form",null,r.a.createElement("p",{className:"h5 text-center mb-4 white-text"},"Sign In"),r.a.createElement("div",{className:"white-text"},r.a.createElement(g.h,{className:"white-text",label:"Type your email",icon:"envelope",group:!0,type:"email",validate:!0,error:"wrong",success:"right",id:"email",value:this.state.email,onChange:this.handleChange("email")}),r.a.createElement(g.h,{className:"white-text",label:"Type your password",icon:"lock",group:!0,type:"password",validate:!0,id:"password",value:this.state.password,onChange:this.handleChange("password")})),this.state.showNullError&&r.a.createElement("div",null,r.a.createElement("p",{className:"white-text text-center"},"The username or password cannot be empty.")),this.state.showError&&r.a.createElement("div",null,r.a.createElement("p",{className:"white-text text-center"},"That username or password isn't recognized. Please try again or register now."),r.a.createElement(g.b,{href:"/signup",size:"sm",color:"yellow accent-3",className:"black-text"},"Register")),r.a.createElement("div",{className:"text-center"},r.a.createElement(g.b,{color:"yellow accent-3",className:"black-text",onClick:function(t){e.loginUser(t)}},"Login"))))))}}]),t}(r.a.Component),R=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleChange=function(e){return function(t){a.setState(Object(S.a)({},e,t.target.value))}},a.registerUser=function(){var e=Object(w.a)(v.a.mark(function e(t){var n,r,o,l;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=a.state,r=n.password,o=n.email,""!==r&&""!==o){e.next=6;break}a.setState({showError:!0,loginError:!1,registerError:!0}),e.next=17;break;case 6:return e.prev=6,e.next=9,C.a.post("/api/auth/signup",{email:o,password:r});case 9:l=e.sent,a.setState({messageFromServer:l.data.message,showError:!1,loginError:!1,registerError:!1}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(6),console.error(e.t0.response.data),"username or email already taken"===e.t0.response.data&&a.setState({showError:!0,loginError:!0,registerError:!1});case 17:case"end":return e.stop()}},e,null,[[6,13]])}));return function(t){return e.apply(this,arguments)}}(),a.state={email:"",password:"",messageFromServer:"",showError:!1,registerError:!1,loginError:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(g.e,{className:"mt-5 pt-5 mainContainer white-text"},r.a.createElement(g.o,null,r.a.createElement(g.c,{md:"6",className:"mx-auto"},r.a.createElement("form",null,r.a.createElement("p",{className:"h5 text-center mb-4 white-text"},"Sign Up"),r.a.createElement("div",{className:"white-text"},r.a.createElement(g.h,{className:"white-text",label:"Your Email",icon:"envelope",group:!0,type:"email",validate:!0,error:"wrong",success:"right",value:this.state.email,onChange:this.handleChange("email"),id:"emal"}),r.a.createElement(g.h,{className:"white-text",label:"Your password",icon:"lock",group:!0,type:"password",validate:!0,id:"password",value:this.state.password,onChange:this.handleChange("password")})),r.a.createElement("div",{className:"text-center"},r.a.createElement(g.b,{color:"yellow accent-3",className:"black-text",onClick:function(t){return e.registerUser(t)}},"Register"))))))}}]),t}(r.a.Component);var B=function(){return r.a.createElement(s.a,null,r.a.createElement("div",{style:{backgroundColor:"#212121"}},r.a.createElement(f,null),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/",component:j}),r.a.createElement(i.b,{exact:!0,path:"/admin",component:A}),r.a.createElement(i.b,{exact:!0,path:"/about",component:I}),r.a.createElement(i.b,{exact:!0,path:"/signin",component:W}),r.a.createElement(i.b,{exact:!0,path:"/signup",component:R}),r.a.createElement(i.b,{component:D})),r.a.createElement(b,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(82),a(83),a(84);l.a.render(r.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[48,1,2]]]);
//# sourceMappingURL=main.bbeeb169.chunk.js.map